from sqlalchemy.orm import Session

from app.models.admin_user import AdminUser
from app.models.qa_knowledge import QaKnowledge
from app.services.auth_service import hash_password


def seed_data(db: Session):
    if db.query(AdminUser).count() == 0:
        admin = AdminUser(
            username="admin",
            password_hash=hash_password("admin123"),
            email="admin@example.com",
            is_active=True,
        )
        db.add(admin)
        db.commit()

    if db.query(QaKnowledge).count() == 0:
        qa_entries = [
            # 세금 (Tax) - 5 entries
            {
                "category": "세금",
                "question": "부가가치세 신고 기한은 언제인가요?",
                "answer": "부가가치세는 1기(1~6월)는 7월 25일까지, 2기(7~12월)는 다음 해 1월 25일까지 신고·납부해야 합니다. 예정신고는 4월 25일, 10월 25일입니다.",
                "keywords": "부가가치세,부가세,신고,기한,납부,VAT",
            },
            {
                "category": "세금",
                "question": "법인세 신고 기한은 언제인가요?",
                "answer": "법인세는 사업연도 종료일이 속하는 달의 말일부터 3개월 이내에 신고·납부해야 합니다. 12월 결산법인의 경우 다음 해 3월 31일까지입니다.",
                "keywords": "법인세,신고,기한,납부,사업연도,결산",
            },
            {
                "category": "세금",
                "question": "원천세 납부 기한은 언제인가요?",
                "answer": "원천징수한 세금은 징수일이 속하는 달의 다음 달 10일까지 납부해야 합니다. 반기별 납부 승인을 받은 경우 7월 10일, 1월 10일까지 납부합니다.",
                "keywords": "원천세,원천징수,납부,기한,반기",
            },
            {
                "category": "세금",
                "question": "세금계산서 발행 기한은 언제인가요?",
                "answer": "세금계산서는 재화 또는 용역의 공급시기가 속하는 달의 다음 달 10일까지 발행해야 합니다. 지연 발행 시 가산세가 부과됩니다.",
                "keywords": "세금계산서,발행,기한,가산세,전자세금계산서",
            },
            {
                "category": "세금",
                "question": "간이과세자와 일반과세자의 차이점은 무엇인가요?",
                "answer": "간이과세자는 연 매출 8,000만원 미만 사업자로 부가세율이 1.5~4%이며, 세금계산서 발행이 제한됩니다. 일반과세자는 10% 세율이 적용되며 매입세액 전액 공제가 가능합니다.",
                "keywords": "간이과세자,일반과세자,차이,매출,부가세율,세금계산서",
            },
            # 급여 (Payroll) - 5 entries
            {
                "category": "급여",
                "question": "4대보험 요율은 어떻게 되나요?",
                "answer": "2024년 기준 4대보험 요율: 국민연금 9%(사업주·근로자 각 4.5%), 건강보험 7.09%(각 3.545%), 장기요양보험 건강보험료의 12.81%, 고용보험 1.8%(사업주 0.9%+근로자 0.9%). 산재보험은 업종별 상이합니다.",
                "keywords": "4대보험,요율,국민연금,건강보험,고용보험,장기요양,산재보험",
            },
            {
                "category": "급여",
                "question": "퇴직금 계산은 어떻게 하나요?",
                "answer": "퇴직금 = 1일 평균임금 × 30일 × (재직일수/365). 평균임금은 퇴직 전 3개월간 총 급여를 해당 기간 총 일수로 나눈 금액입니다. 1년 이상 근무한 근로자에게 지급 의무가 있습니다.",
                "keywords": "퇴직금,계산,평균임금,재직일수,1년,지급",
            },
            {
                "category": "급여",
                "question": "최저임금은 얼마인가요?",
                "answer": "2024년 최저임금은 시급 9,860원이며, 월급(주 40시간 기준)으로 환산하면 2,060,740원입니다. 수습기간 3개월 이내 근로자는 최저임금의 90%를 적용할 수 있습니다(1년 이상 계약 시).",
                "keywords": "최저임금,시급,월급,수습,2024",
            },
            {
                "category": "급여",
                "question": "연차수당은 어떻게 계산하나요?",
                "answer": "미사용 연차수당 = 1일 통상임금 × 미사용 연차일수. 통상임금은 기본급 + 고정수당을 월 소정근로시간(209시간)으로 나눈 시급 × 8시간입니다. 연차는 1년간 80% 이상 출근 시 15일이 부여됩니다.",
                "keywords": "연차수당,연차,통상임금,미사용,계산,출근율",
            },
            {
                "category": "급여",
                "question": "급여 지급 시 원천징수 항목은 무엇인가요?",
                "answer": "급여에서 원천징수하는 항목: 근로소득세, 지방소득세(근로소득세의 10%), 국민연금, 건강보험료, 장기요양보험료, 고용보험료입니다. 소득세는 간이세액표에 따라 공제합니다.",
                "keywords": "원천징수,급여,소득세,지방소득세,공제,간이세액표",
            },
            # 비용처리 (Expense) - 5 entries
            {
                "category": "비용처리",
                "question": "접대비 한도는 얼마인가요?",
                "answer": "접대비 기본 한도는 중소기업 3,600만원, 일반기업 2,400만원(연 매출 100억 이하)입니다. 매출액에 따라 추가 한도가 적용됩니다. 1건당 3만원 이하(경조금 20만원)는 간이영수증 가능하며, 초과 시 법정증빙이 필요합니다.",
                "keywords": "접대비,한도,중소기업,법정증빙,간이영수증,경조금",
            },
            {
                "category": "비용처리",
                "question": "복리후생비로 처리할 수 있는 항목은 무엇인가요?",
                "answer": "복리후생비 항목: 식대(월 20만원 비과세), 교통비, 건강검진비, 경조사비, 체육·문화활동비, 직원 교육비, 명절 선물 등입니다. 임직원 전체를 대상으로 하며 사회통념상 타당한 금액이어야 합니다.",
                "keywords": "복리후생비,식대,교통비,건강검진,경조사,비과세",
            },
            {
                "category": "비용처리",
                "question": "차량 관련 비용처리는 어떻게 하나요?",
                "answer": "업무용 차량 비용: 감가상각비, 유류비, 보험료, 수리비, 주차비, 통행료 등이 비용 처리 가능합니다. 업무용승용차는 연간 1,500만원 한도(감가상각비 포함 800만원)이며, 운행일지 작성이 필요합니다.",
                "keywords": "차량,업무용승용차,감가상각,유류비,운행일지,한도",
            },
            {
                "category": "비용처리",
                "question": "법정증빙서류에는 어떤 것이 있나요?",
                "answer": "법정증빙서류: 세금계산서, 계산서, 신용카드 매출전표, 현금영수증이 해당됩니다. 3만원 초과 거래 시 법정증빙 없으면 2% 가산세가 부과됩니다. 간이영수증은 3만원 이하(접대비 1만원)만 인정됩니다.",
                "keywords": "법정증빙,세금계산서,신용카드,현금영수증,가산세,간이영수증",
            },
            {
                "category": "비용처리",
                "question": "출장비 처리 기준은 어떻게 되나요?",
                "answer": "출장비는 교통비(실비 정산), 숙박비(실비 정산), 일비(정액 지급, 보통 2~5만원) 등으로 구성됩니다. 사내 출장여비 규정에 따라 처리하며, 법정증빙을 갖추어야 합니다. 해외 출장은 별도 기준을 적용합니다.",
                "keywords": "출장비,교통비,숙박비,일비,출장여비규정,해외출장",
            },
            # 회계처리 (Accounting) - 5 entries
            {
                "category": "회계처리",
                "question": "감가상각 방법에는 어떤 것이 있나요?",
                "answer": "감가상각 방법: 정액법(매년 동일 금액 상각), 정률법(매년 잔존가액에 일정률 적용), 생산량비례법 등이 있습니다. 건물은 정액법만 가능하고, 기계장치 등은 정액법·정률법 선택 가능합니다. 내용연수는 시행규칙에 따릅니다.",
                "keywords": "감가상각,정액법,정률법,내용연수,건물,기계장치,상각",
            },
            {
                "category": "회계처리",
                "question": "매출채권 대손처리는 어떻게 하나요?",
                "answer": "대손처리 요건: 소멸시효 완성(상사 5년, 민사 10년), 회수불능 판정, 부도 발생 후 6개월 경과 등입니다. 대손충당금은 매출채권의 1%(금융업 2%)까지 설정 가능하며, 세무상 손금 인정을 받으려면 법적 요건을 충족해야 합니다.",
                "keywords": "대손처리,대손충당금,매출채권,소멸시효,부도,회수불능",
            },
            {
                "category": "회계처리",
                "question": "재고자산 평가방법은 무엇이 있나요?",
                "answer": "재고자산 평가방법: 선입선출법(FIFO), 후입선출법(LIFO, K-IFRS 불가), 총평균법, 이동평균법, 개별법 등이 있습니다. 법인세법상 신고한 방법을 계속 적용해야 하며, 변경 시 납세지 관할세무서에 신고해야 합니다.",
                "keywords": "재고자산,평가방법,선입선출법,총평균법,이동평균법,FIFO",
            },
            {
                "category": "회계처리",
                "question": "결산 시 필수 확인 사항은 무엇인가요?",
                "answer": "결산 필수 확인: 1)매출·매입 세금계산서 대사, 2)은행 잔액 확인, 3)미수금·미지급금 확인, 4)감가상각비 계상, 5)대손충당금 설정, 6)선급비용·미지급비용 정리, 7)재고자산 실사, 8)가지급금·가수금 정리입니다.",
                "keywords": "결산,세금계산서,대사,감가상각,대손충당금,재고실사,가지급금",
            },
            {
                "category": "회계처리",
                "question": "전표 종류와 작성 방법을 알려주세요.",
                "answer": "전표 종류: 입금전표(현금 수입), 출금전표(현금 지출), 대체전표(현금 외 거래), 매입전표, 매출전표가 있습니다. 전표에는 일자, 계정과목, 거래처, 적요, 금액을 기재하며, 증빙서류를 첨부해야 합니다.",
                "keywords": "전표,입금전표,출금전표,대체전표,계정과목,적요,증빙",
            },
            # 기타 (Other) - 5 entries
            {
                "category": "기타",
                "question": "사업자등록 변경 신고는 어떻게 하나요?",
                "answer": "사업자등록 변경 신고는 변경 사유 발생일로부터 20일 이내에 관할 세무서에 신고해야 합니다. 상호, 대표자, 업종, 사업장 소재지 변경 등이 해당됩니다. 홈택스에서 온라인으로도 신고 가능합니다.",
                "keywords": "사업자등록,변경,신고,세무서,홈택스,상호,대표자",
            },
            {
                "category": "기타",
                "question": "전자세금계산서 의무발행 대상은 누구인가요?",
                "answer": "전자세금계산서 의무발행 대상: 법인사업자 전체, 직전 연도 공급가액 합계 8,000만원 이상 개인사업자입니다. 미발행 시 공급가액의 2% 가산세가 부과되며, 종이 세금계산서 발행 시에도 1% 가산세가 적용됩니다.",
                "keywords": "전자세금계산서,의무발행,법인,개인사업자,가산세",
            },
            {
                "category": "기타",
                "question": "장부 보관 기간은 얼마나 되나요?",
                "answer": "장부 보관 기간: 장부·증빙서류는 5년간 보관 의무가 있습니다(국세기본법). 다만, 결손금이 있는 경우 10년간 보관해야 합니다. 전자장부도 동일하게 적용되며, 원본과 동일한 효력을 가집니다.",
                "keywords": "장부,보관,기간,증빙서류,5년,10년,전자장부",
            },
            {
                "category": "기타",
                "question": "홈택스에서 할 수 있는 업무는 무엇인가요?",
                "answer": "홈택스 주요 업무: 전자세금계산서 발행·조회, 부가세·법인세·종합소득세 신고, 원천세 신고, 사업자등록 신청·변경, 납부내역 조회, 세금계산서 합계표 조회, 현금영수증 조회 등이 가능합니다.",
                "keywords": "홈택스,전자세금계산서,부가세,법인세,신고,조회,현금영수증",
            },
            {
                "category": "기타",
                "question": "경리 업무 월별 체크리스트를 알려주세요.",
                "answer": "월별 경리 체크리스트: 매월 10일-원천세 신고·납부, 매월 말-급여 지급·4대보험 납부, 분기별-부가세 신고, 3월-법인세 신고(12월 결산), 5월-종합소득세 신고, 매월-세금계산서 발행·수취 확인, 매월-은행 잔액 대사, 매월-미수금·미지급금 관리.",
                "keywords": "체크리스트,월별,원천세,급여,4대보험,부가세,법인세",
            },
        ]

        for entry in qa_entries:
            qa = QaKnowledge(**entry)
            db.add(qa)
        db.commit()
